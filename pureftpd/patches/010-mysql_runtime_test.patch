--- a/configure.ac
+++ b/configure.ac
@@ -1296,7 +1296,7 @@
       ])
     ])
     AC_MSG_CHECKING(whether mysql clients can run)
-    AC_RUN_IFELSE([AC_LANG_SOURCE([[
+    AC_LINK_IFELSE([AC_LANG_SOURCE([[
       #include <stdio.h>
       #include <mysql.h>    
       int main(void)
